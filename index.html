<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tá»• áº¤m Cá»§a ChÃºng MÃ¬nh ğŸ¡</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Nunito:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #FDF6EC;
    --warm-white: #FFFBF5;
    --peach: #F5C5A3;
    --peach-light: #FAE0CC;
    --rose: #E8A598;
    --rose-dark: #C97A6E;
    --sage: #A8C5A0;
    --sage-light: #D4E8D0;
    --lavender: #C5B8D8;
    --lavender-light: #E8E2F2;
    --amber: #E8C87A;
    --amber-light: #F5E4B0;
    --brown: #7A5C4A;
    --brown-light: #A67C64;
    --text: #4A3728;
    --text-soft: #7A6558;
    --shadow: rgba(122, 92, 74, 0.12);
    --shadow-hover: rgba(122, 92, 74, 0.2);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--cream);
    color: var(--text);
    min-height: 100vh;
    background-image:
      radial-gradient(circle at 20% 20%, rgba(245,197,163,0.25) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(197,184,216,0.2) 0%, transparent 50%),
      radial-gradient(circle at 60% 10%, rgba(168,197,160,0.15) 0%, transparent 40%);
  }

  /* HEADER */
  .header {
    background: linear-gradient(135deg, #FDF0E4 0%, #F8E8F2 50%, #EEF5EC 100%);
    padding: 2rem 1.5rem 1.5rem;
    text-align: center;
    border-bottom: 2px solid var(--peach-light);
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    top: -30px; left: -30px; right: -30px;
    height: 100px;
    background: radial-gradient(ellipse, rgba(245,197,163,0.3) 0%, transparent 70%);
  }
  .header-emoji {
    font-size: 2.5rem;
    display: block;
    margin-bottom: 0.5rem;
    animation: float 3s ease-in-out infinite;
  }
  @keyframes float {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
  .header h1 {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    color: var(--brown);
    line-height: 1.2;
  }
  .header p {
    font-size: 0.85rem;
    color: var(--text-soft);
    margin-top: 0.4rem;
    font-style: italic;
  }
  .date-badge {
    display: inline-block;
    background: white;
    border: 1.5px solid var(--peach);
    border-radius: 20px;
    padding: 0.3rem 1rem;
    font-size: 0.8rem;
    color: var(--brown-light);
    margin-top: 0.8rem;
    font-weight: 600;
  }

  /* NAV */
  .nav {
    display: flex;
    overflow-x: auto;
    gap: 0.5rem;
    padding: 1rem 1rem 0.5rem;
    scrollbar-width: none;
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--cream);
    border-bottom: 1px solid var(--peach-light);
    justify-content: center;
  }
  .nav::-webkit-scrollbar { display: none; }
  .nav-btn {
    flex-shrink: 0;
    padding: 0.5rem 1.1rem;
    border: 2px solid transparent;
    border-radius: 25px;
    background: white;
    font-family: 'Nunito', sans-serif;
    font-size: 0.82rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.25s;
    display: flex;
    align-items: center;
    gap: 0.35rem;
    white-space: nowrap;
    color: var(--text-soft);
    box-shadow: 0 2px 8px var(--shadow);
  }
  .nav-btn.active, .nav-btn:hover {
    color: var(--brown);
    transform: translateY(-1px);
    box-shadow: 0 4px 14px var(--shadow-hover);
  }
  .nav-btn[data-tab="finance"].active { background: var(--amber-light); border-color: var(--amber); }
  .nav-btn[data-tab="chores"].active { background: var(--sage-light); border-color: var(--sage); }
  .nav-btn[data-tab="notes"].active { background: var(--lavender-light); border-color: var(--lavender); }
  .nav-btn[data-tab="dreams"].active { background: var(--peach-light); border-color: var(--peach); }
  .nav-btn[data-tab="ai"].active { background: #E8F0FE; border-color: #A8C0F0; }

  /* MAIN */
  .main { padding: 1.2rem 1rem 5rem; max-width: 600px; margin: 0 auto; }
  .tab-content { display: none; animation: fadeUp 0.3s ease; }
  .tab-content.active { display: block; }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* CARDS */
  .card {
    background: white;
    border-radius: 18px;
    padding: 1.3rem;
    margin-bottom: 1rem;
    box-shadow: 0 3px 15px var(--shadow);
    border: 1.5px solid rgba(255,255,255,0.8);
  }
  .card-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.05rem;
    color: var(--brown);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* INPUTS */
  input, select, textarea {
    font-family: 'Nunito', sans-serif;
    font-size: 0.88rem;
    border: 1.5px solid var(--peach-light);
    border-radius: 12px;
    padding: 0.6rem 0.9rem;
    width: 100%;
    background: var(--warm-white);
    color: var(--text);
    outline: none;
    transition: border-color 0.2s;
  }
  input:focus, select:focus, textarea:focus {
    border-color: var(--peach);
    background: white;
  }
  textarea { resize: vertical; min-height: 80px; }

  .input-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.6rem;
    margin-bottom: 0.6rem;
  }
  .input-row.three { grid-template-columns: 1fr 1fr 1fr; }

  label {
    font-size: 0.78rem;
    color: var(--text-soft);
    font-weight: 600;
    display: block;
    margin-bottom: 0.3rem;
  }

  /* BUTTONS */
  .btn {
    padding: 0.65rem 1.2rem;
    border: none;
    border-radius: 25px;
    font-family: 'Nunito', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
  }
  .btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
  .btn:active { transform: translateY(0); }
  .btn-peach { background: var(--peach); color: var(--brown); }
  .btn-sage { background: var(--sage); color: #3A5A32; }
  .btn-lavender { background: var(--lavender); color: #4A3A6A; }
  .btn-amber { background: var(--amber); color: #5A4A1A; }
  .btn-rose { background: var(--rose); color: white; }
  .btn-full { width: 100%; justify-content: center; margin-top: 0.5rem; }
  .btn-sm { padding: 0.35rem 0.8rem; font-size: 0.78rem; }

  /* FINANCE */
  .balance-display {
    background: linear-gradient(135deg, var(--amber-light), #FFF8E8);
    border: 2px solid var(--amber);
    border-radius: 16px;
    padding: 1.2rem;
    text-align: center;
    margin-bottom: 1rem;
  }
  .balance-label { font-size: 0.78rem; color: var(--text-soft); margin-bottom: 0.2rem; }
  .balance-amount {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    font-weight: 600;
    color: var(--brown);
  }
  .balance-sub { display: flex; justify-content: center; gap: 1.5rem; margin-top: 0.8rem; }
  .balance-in, .balance-out {
    font-size: 0.82rem;
    font-weight: 600;
    padding: 0.3rem 0.8rem;
    border-radius: 12px;
  }
  .balance-in { background: var(--sage-light); color: #3A5A32; }
  .balance-out { background: #FFE8E4; color: var(--rose-dark); }

  .transaction-list { max-height: 280px; overflow-y: auto; }
  .transaction-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.7rem 0.9rem;
    border-radius: 12px;
    margin-bottom: 0.5rem;
    border: 1.5px solid transparent;
    transition: all 0.2s;
  }
  .transaction-item:hover { transform: translateX(3px); }
  .transaction-item.income { background: var(--sage-light); border-color: var(--sage); }
  .transaction-item.expense { background: #FFF0EE; border-color: #F5C5BC; }
  .t-info { flex: 1; }
  .t-desc { font-size: 0.88rem; font-weight: 600; color: var(--text); }
  .t-meta { font-size: 0.74rem; color: var(--text-soft); margin-top: 0.1rem; }
  .t-amount { font-weight: 700; font-size: 0.95rem; }
  .t-amount.income { color: #3A7A32; }
  .t-amount.expense { color: var(--rose-dark); }
  .t-delete { background: none; border: none; cursor: pointer; font-size: 1rem; opacity: 0.4; padding: 0.2rem; transition: opacity 0.2s; }
  .t-delete:hover { opacity: 0.9; }

  /* CHORES */
  .chore-list { display: flex; flex-direction: column; gap: 0.5rem; }
  .chore-item {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1rem;
    background: var(--warm-white);
    border-radius: 14px;
    border: 1.5px solid var(--sage-light);
    transition: all 0.2s;
  }
  .chore-item.done { opacity: 0.55; background: var(--sage-light); }
  .chore-item.done .chore-name { text-decoration: line-through; }
  .chore-check {
    width: 22px; height: 22px;
    border: 2px solid var(--sage);
    border-radius: 50%;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s;
    font-size: 0.75rem;
    background: white;
  }
  .chore-item.done .chore-check { background: var(--sage); color: white; }
  .chore-info { flex: 1; }
  .chore-name { font-size: 0.9rem; font-weight: 600; color: var(--text); }
  .chore-assign { font-size: 0.75rem; color: var(--text-soft); margin-top: 0.1rem; }
  .chore-freq {
    font-size: 0.7rem;
    padding: 0.2rem 0.6rem;
    border-radius: 10px;
    background: var(--sage-light);
    color: #3A6A32;
    font-weight: 600;
    flex-shrink: 0;
  }
  .progress-wrap { margin-bottom: 1rem; }
  .progress-label { display: flex; justify-content: space-between; font-size: 0.78rem; color: var(--text-soft); margin-bottom: 0.4rem; }
  .progress-bar { background: var(--sage-light); border-radius: 10px; height: 8px; overflow: hidden; }
  .progress-fill { background: var(--sage); height: 100%; border-radius: 10px; transition: width 0.4s ease; }

  /* NOTES */
  .notes-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; }
  .note-card {
    padding: 1rem;
    border-radius: 16px;
    border: 2px solid transparent;
    position: relative;
    cursor: pointer;
    transition: all 0.25s;
    min-height: 120px;
    display: flex;
    flex-direction: column;
  }
  .note-card:hover { transform: translateY(-3px) rotate(0.5deg); box-shadow: 0 8px 20px var(--shadow); }
  .note-card.color-1 { background: #FFF8E8; border-color: var(--amber); }
  .note-card.color-2 { background: var(--lavender-light); border-color: var(--lavender); }
  .note-card.color-3 { background: var(--sage-light); border-color: var(--sage); }
  .note-card.color-4 { background: #FFF0EE; border-color: var(--rose); }
  .note-card.color-5 { background: var(--peach-light); border-color: var(--peach); }
  .note-tag {
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    opacity: 0.6;
    margin-bottom: 0.4rem;
  }
  .note-title { font-weight: 700; font-size: 0.88rem; color: var(--text); margin-bottom: 0.4rem; }
  .note-body { font-size: 0.78rem; color: var(--text-soft); flex: 1; line-height: 1.5; }
  .note-date { font-size: 0.7rem; color: var(--text-soft); opacity: 0.7; margin-top: 0.5rem; }
  .note-del { position: absolute; top: 0.5rem; right: 0.5rem; background: none; border: none; cursor: pointer; font-size: 0.9rem; opacity: 0; transition: opacity 0.2s; }
  .note-card:hover .note-del { opacity: 0.5; }
  .note-del:hover { opacity: 1 !important; }

  .events-list { margin-top: 0.5rem; }
  .event-item {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.7rem 0.9rem;
    background: var(--warm-white);
    border-radius: 12px;
    margin-bottom: 0.5rem;
    border-left: 4px solid var(--lavender);
    transition: all 0.2s;
  }
  .event-item:hover { transform: translateX(3px); }
  .event-date-box {
    background: var(--lavender-light);
    border-radius: 10px;
    padding: 0.4rem 0.7rem;
    text-align: center;
    flex-shrink: 0;
    min-width: 50px;
  }
  .event-day { font-family: 'Playfair Display', serif; font-size: 1.2rem; font-weight: 600; color: var(--brown); line-height: 1; }
  .event-month { font-size: 0.68rem; color: var(--text-soft); font-weight: 600; text-transform: uppercase; }
  .event-info { flex: 1; }
  .event-name { font-size: 0.88rem; font-weight: 600; }
  .event-who { font-size: 0.75rem; color: var(--text-soft); margin-top: 0.1rem; }
  .event-shared { font-size: 0.68rem; padding: 0.15rem 0.5rem; border-radius: 8px; font-weight: 700; }
  .event-shared.chung { background: var(--lavender-light); color: #4A3A7A; }
  .event-shared.ca-nhan { background: var(--peach-light); color: var(--brown); }

  /* DREAMS */
  .dream-item {
    background: var(--warm-white);
    border-radius: 16px;
    padding: 1rem 1.1rem;
    margin-bottom: 0.8rem;
    border: 2px solid var(--peach-light);
    transition: all 0.25s;
  }
  .dream-item:hover { border-color: var(--peach); transform: translateY(-2px); }
  .dream-item.done { border-color: var(--sage); background: var(--sage-light); }
  .dream-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.6rem; }
  .dream-title { font-weight: 700; font-size: 0.95rem; color: var(--text); flex: 1; }
  .dream-cat {
    font-size: 0.7rem;
    padding: 0.2rem 0.6rem;
    border-radius: 10px;
    font-weight: 700;
    margin-left: 0.5rem;
    flex-shrink: 0;
  }
  .cat-travel { background: var(--lavender-light); color: #4A3A7A; }
  .cat-home { background: var(--peach-light); color: var(--brown); }
  .cat-life { background: var(--sage-light); color: #3A6A32; }
  .cat-money { background: var(--amber-light); color: #5A4A1A; }
  .dream-note { font-size: 0.8rem; color: var(--text-soft); margin-bottom: 0.7rem; line-height: 1.5; }
  .dream-progress-label { font-size: 0.75rem; color: var(--text-soft); display: flex; justify-content: space-between; margin-bottom: 0.3rem; }
  .dream-progress-bar { background: var(--peach-light); border-radius: 10px; height: 8px; overflow: hidden; margin-bottom: 0.7rem; }
  .dream-progress-fill { background: linear-gradient(to right, var(--peach), var(--rose)); height: 100%; border-radius: 10px; transition: width 0.4s ease; }
  .dream-item.done .dream-progress-fill { background: linear-gradient(to right, var(--sage), #5A9A52); }
  .dream-footer { display: flex; justify-content: space-between; align-items: center; }
  .dream-done-btn {
    background: none;
    border: 1.5px solid var(--peach);
    border-radius: 12px;
    padding: 0.3rem 0.8rem;
    font-size: 0.75rem;
    font-weight: 700;
    cursor: pointer;
    color: var(--brown-light);
    transition: all 0.2s;
  }
  .dream-item.done .dream-done-btn { border-color: var(--sage); color: #3A6A32; background: white; }
  .dream-done-btn:hover { transform: scale(1.05); }

  /* SECTION TITLES */
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 0.95rem;
    color: var(--brown);
    margin: 1.2rem 0 0.6rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }
  .section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--peach-light);
    margin-left: 0.5rem;
  }

  /* TABS BOTTOM HOME */
  .home-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; }
  .home-card {
    background: white;
    border-radius: 18px;
    padding: 1.2rem;
    box-shadow: 0 3px 12px var(--shadow);
    cursor: pointer;
    transition: all 0.25s;
    border: 2px solid transparent;
    text-align: center;
  }
  .home-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px var(--shadow-hover); }
  .home-card.finance { border-color: var(--amber); }
  .home-card.chores { border-color: var(--sage); }
  .home-card.notes { border-color: var(--lavender); }
  .home-card.dreams { border-color: var(--peach); }
  .home-card-icon { font-size: 2rem; margin-bottom: 0.5rem; }
  .home-card-title { font-weight: 700; font-size: 0.9rem; color: var(--text); }
  .home-card-sub { font-size: 0.75rem; color: var(--text-soft); margin-top: 0.2rem; }

  .welcome-banner {
    background: linear-gradient(135deg, #FFF0E8 0%, #F8EEF8 100%);
    border-radius: 18px;
    padding: 1.5rem;
    margin-bottom: 1.2rem;
    border: 2px solid var(--peach-light);
    text-align: center;
  }
  .welcome-banner h2 {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem;
    color: var(--brown);
  }
  .welcome-banner p { font-size: 0.82rem; color: var(--text-soft); margin-top: 0.4rem; line-height: 1.6; }

  .today-summary {
    background: white;
    border-radius: 18px;
    padding: 1.2rem;
    margin-bottom: 1rem;
    box-shadow: 0 3px 12px var(--shadow);
  }
  .summary-row { display: flex; justify-content: space-around; margin-top: 0.8rem; }
  .summary-item { text-align: center; }
  .summary-num { font-family: 'Playfair Display', serif; font-size: 1.6rem; font-weight: 600; color: var(--brown); }
  .summary-label { font-size: 0.72rem; color: var(--text-soft); margin-top: 0.1rem; }

  .empty-state { text-align: center; padding: 2rem 1rem; color: var(--text-soft); font-size: 0.85rem; }
  .empty-state span { font-size: 2.5rem; display: block; margin-bottom: 0.5rem; opacity: 0.5; }

  /* SCROLL */
  .transaction-list::-webkit-scrollbar,
  .chore-list::-webkit-scrollbar { width: 4px; }
  .transaction-list::-webkit-scrollbar-thumb,
  .chore-list::-webkit-scrollbar-thumb { background: var(--peach); border-radius: 4px; }

  /* MODAL OVERLAY */
  .modal-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(74,55,40,0.4);
    backdrop-filter: blur(4px);
    z-index: 200;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }
  .modal-overlay.show { display: flex; }
  .modal-box {
    background: var(--warm-white);
    border-radius: 24px;
    padding: 1.5rem;
    width: 100%;
    max-width: 480px;
    max-height: 85vh;
    overflow-y: auto;
    margin: auto;
    animation: scaleIn 0.25s ease;
  }
  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
  .modal-handle {
    width: 40px; height: 4px;
    background: var(--peach);
    border-radius: 2px;
    margin: 0 auto 1.2rem;
  }
  .modal-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    color: var(--brown);
    margin-bottom: 1rem;
    text-align: center;
  }

  .chip-group { display: flex; flex-wrap: wrap; gap: 0.4rem; margin-bottom: 0.6rem; }
  .chip {
    padding: 0.3rem 0.8rem;
    border-radius: 15px;
    border: 1.5px solid var(--peach-light);
    background: white;
    font-size: 0.78rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--text-soft);
  }
  .chip.active, .chip:hover {
    background: var(--peach-light);
    border-color: var(--peach);
    color: var(--brown);
  }
  .chip.sage.active { background: var(--sage-light); border-color: var(--sage); color: #3A6A32; }
  .chip.lav.active { background: var(--lavender-light); border-color: var(--lavender); color: #4A3A7A; }
  .chip.amber.active { background: var(--amber-light); border-color: var(--amber); color: #5A4A1A; }

  /* AI ASSISTANT */
  .ai-header {
    background: linear-gradient(135deg, #EEF3FF 0%, #F5EEFF 100%);
    border-radius: 18px;
    padding: 1.3rem;
    margin-bottom: 1rem;
    border: 2px solid #C8D8F8;
    text-align: center;
  }
  .ai-header h3 { font-family: 'Playfair Display', serif; color: var(--brown); font-size: 1.1rem; }
  .ai-header p { font-size: 0.78rem; color: var(--text-soft); margin-top: 0.3rem; line-height: 1.6; }

  .ai-chat-box {
    background: white;
    border-radius: 18px;
    border: 1.5px solid #D8E4F8;
    overflow: hidden;
    margin-bottom: 1rem;
    display: flex;
    flex-direction: column;
    height: 380px;
  }
  .ai-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
  }
  .ai-messages::-webkit-scrollbar { width: 3px; }
  .ai-messages::-webkit-scrollbar-thumb { background: #C8D8F8; border-radius: 3px; }

  .msg { display: flex; gap: 0.6rem; align-items: flex-end; }
  .msg.user { flex-direction: row-reverse; }
  .msg-avatar {
    width: 30px; height: 30px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.9rem;
    flex-shrink: 0;
  }
  .msg.ai .msg-avatar { background: #EEF3FF; }
  .msg.user .msg-avatar { background: var(--peach-light); }
  .msg-bubble {
    max-width: 78%;
    padding: 0.7rem 0.9rem;
    border-radius: 16px;
    font-size: 0.84rem;
    line-height: 1.55;
  }
  .msg.ai .msg-bubble {
    background: #F2F6FF;
    border: 1.5px solid #D8E4F8;
    color: var(--text);
    border-bottom-left-radius: 4px;
  }
  .msg.user .msg-bubble {
    background: var(--peach-light);
    border: 1.5px solid var(--peach);
    color: var(--text);
    border-bottom-right-radius: 4px;
  }
  .msg-action-tag {
    display: inline-block;
    background: var(--sage-light);
    color: #3A6A32;
    border-radius: 8px;
    padding: 0.15rem 0.5rem;
    font-size: 0.72rem;
    font-weight: 700;
    margin-top: 0.4rem;
  }
  .msg-action-tag.finance { background: var(--amber-light); color: #5A4A1A; }
  .msg-action-tag.dream { background: var(--peach-light); color: var(--brown); }
  .msg-action-tag.note { background: var(--lavender-light); color: #4A3A7A; }

  .ai-input-row {
    display: flex;
    gap: 0.5rem;
    padding: 0.8rem;
    border-top: 1.5px solid #EEF3FF;
    background: #FAFCFF;
    align-items: flex-end;
  }
  .ai-input-row textarea {
    flex: 1;
    min-height: 42px;
    max-height: 100px;
    border-color: #D8E4F8;
    border-radius: 14px;
    font-size: 0.85rem;
    resize: none;
    line-height: 1.4;
    padding: 0.6rem 0.9rem;
  }
  .ai-send-btn {
    width: 42px; height: 42px;
    border-radius: 50%;
    background: #A8C0F0;
    border: none;
    cursor: pointer;
    font-size: 1.1rem;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
  }
  .ai-send-btn:hover { background: #8AAAE8; transform: scale(1.05); }
  .ai-send-btn:disabled { opacity: 0.5; cursor: not-allowed; }

  .ai-mic-btn {
    width: 42px; height: 42px;
    border-radius: 50%;
    background: var(--rose);
    border: none;
    cursor: pointer;
    font-size: 1rem;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
    color: white;
  }
  .ai-mic-btn:hover { background: var(--rose-dark); transform: scale(1.05); }
  .ai-mic-btn.recording { background: var(--rose-dark); animation: pulse 1s infinite; }
  @keyframes pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.1)} }

  .ai-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  .ai-suggest-btn {
    background: white;
    border: 1.5px solid #D8E4F8;
    border-radius: 20px;
    padding: 0.4rem 0.9rem;
    font-size: 0.78rem;
    font-weight: 600;
    color: #5A7AC8;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'Nunito', sans-serif;
  }
  .ai-suggest-btn:hover { background: #EEF3FF; border-color: #A8C0F0; transform: translateY(-1px); }

  .typing-dots { display: flex; gap: 4px; padding: 4px 0; }
  .typing-dots span {
    width: 7px; height: 7px;
    background: #A8C0F0;
    border-radius: 50%;
    animation: bounce 1.2s infinite;
  }
  .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
  .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes bounce { 0%,80%,100%{transform:translateY(0)} 40%{transform:translateY(-6px)} }
</style>
</head>
<body>

<header class="header">
  <span class="header-emoji">ğŸ¡</span>
  <h1>Tá»• áº¤m Cá»§a ChÃºng MÃ¬nh</h1>
  <p>NÆ¡i lÆ°u giá»¯ má»i khoáº£nh kháº¯c yÃªu thÆ°Æ¡ng ğŸŒ¸</p>
  <div class="date-badge" id="headerDate"></div>
</header>

<nav class="nav">
  <button class="nav-btn active" data-tab="home" onclick="switchTab('home', this)">ğŸ  Tá»• áº¤m</button>
  <button class="nav-btn" data-tab="finance" onclick="switchTab('finance', this)">ğŸ’° Thu Chi</button>
  <button class="nav-btn" data-tab="chores" onclick="switchTab('chores', this)">ğŸ§¹ Viá»‡c NhÃ </button>
  <button class="nav-btn" data-tab="notes" onclick="switchTab('notes', this)">ğŸ“ Ghi ChÃº</button>
  <button class="nav-btn" data-tab="dreams" onclick="switchTab('dreams', this)">ğŸŒŸ Æ¯á»›c MÆ¡</button>
  <button class="nav-btn" data-tab="ai" onclick="switchTab('ai', this)">ğŸ¤– Trá»£ LÃ½</button>
</nav>

<main class="main">

  <!-- HOME TAB -->
  <div class="tab-content active" id="tab-home">
    <div class="welcome-banner">
      <h2>ChÃ o buá»•i sÃ¡ng, Tá»• áº¤m! â˜€ï¸</h2>
      <p>Má»—i ngÃ y lÃ  má»™t trang má»›i Ä‘á»ƒ chÃºng mÃ¬nh cÃ¹ng viáº¿t nÃªn cÃ¢u chuyá»‡n cá»§a hai ngÆ°á»i ğŸ’•</p>
    </div>
    <div class="today-summary card">
      <div class="card-title">âœ¨ Tá»•ng Quan HÃ´m Nay</div>
      <div class="summary-row">
        <div class="summary-item">
          <div class="summary-num" id="home-balance">0Ä‘</div>
          <div class="summary-label">Sá»‘ dÆ°</div>
        </div>
        <div class="summary-item">
          <div class="summary-num" id="home-chores">0/0</div>
          <div class="summary-label">Viá»‡c nhÃ </div>
        </div>
        <div class="summary-item">
          <div class="summary-num" id="home-dreams">0%</div>
          <div class="summary-label">Æ¯á»›c mÆ¡</div>
        </div>
      </div>
    </div>
    <div class="home-grid">
      <div class="home-card finance" onclick="switchTabById('finance')">
        <div class="home-card-icon">ğŸ’°</div>
        <div class="home-card-title">Thu Chi</div>
        <div class="home-card-sub">Quáº£n lÃ½ ngÃ¢n sÃ¡ch</div>
      </div>
      <div class="home-card chores" onclick="switchTabById('chores')">
        <div class="home-card-icon">ğŸ§¹</div>
        <div class="home-card-title">Viá»‡c NhÃ </div>
        <div class="home-card-sub">PhÃ¢n cÃ´ng cÃ¹ng nhau</div>
      </div>
      <div class="home-card notes" onclick="switchTabById('notes')">
        <div class="home-card-icon">ğŸ“</div>
        <div class="home-card-title">Ghi ChÃº</div>
        <div class="home-card-sub">Sá»± kiá»‡n & nháº¯n nhá»</div>
      </div>
      <div class="home-card dreams" onclick="switchTabById('dreams')">
        <div class="home-card-icon">ğŸŒŸ</div>
        <div class="home-card-title">Æ¯á»›c MÆ¡</div>
        <div class="home-card-sub">Má»¥c tiÃªu chung mÃ¬nh</div>
      </div>
    </div>
    <div class="section-title">ğŸ’Œ Nháº¯n Nhau Äi</div>
    <div class="card">
      <textarea id="love-note" placeholder="Viáº¿t gÃ¬ Ä‘Ã³ ngá»t ngÃ o cho ná»­a kia... ğŸŒ¸" style="min-height:60px;"></textarea>
      <div style="margin-top:0.6rem; display:flex; justify-content:flex-end;">
        <button class="btn btn-rose btn-sm" onclick="saveLoveNote()">ğŸ’Œ Gá»­i yÃªu thÆ°Æ¡ng</button>
      </div>
      <div id="love-notes-list" style="margin-top:0.8rem;"></div>
    </div>
  </div>

  <!-- FINANCE TAB -->
  <div class="tab-content" id="tab-finance">
    <div class="balance-display">
      <div class="balance-label">Sá»‘ dÆ° hiá»‡n táº¡i</div>
      <div class="balance-amount" id="balance-display">0 Ä‘</div>
      <div class="balance-sub">
        <span class="balance-in">â–² <span id="total-in">0Ä‘</span></span>
        <span class="balance-out">â–¼ <span id="total-out">0Ä‘</span></span>
      </div>
    </div>

    <div class="card">
      <div class="card-title">â• ThÃªm Giao Dá»‹ch</div>
      <div class="chip-group" id="type-chips">
        <span class="chip active" data-val="expense" onclick="selectChip(this,'type-chips')">Chi tiÃªu</span>
        <span class="chip" data-val="income" onclick="selectChip(this,'type-chips')">Thu nháº­p</span>
      </div>
      <div class="input-row">
        <div>
          <label>MÃ´ táº£</label>
          <input type="text" id="t-desc" placeholder="vd: tiá»n chá»£...">
        </div>
        <div>
          <label>Sá»‘ tiá»n (Ä‘)</label>
          <input type="number" id="t-amount" placeholder="0">
        </div>
      </div>
      <div class="input-row">
        <div>
          <label>Danh má»¥c</label>
          <select id="t-cat">
            <option>ğŸ›’ Thá»±c pháº©m</option>
            <option>ğŸ  NhÃ  cá»­a</option>
            <option>ğŸš— Di chuyá»ƒn</option>
            <option>ğŸ’Š Sá»©c khá»e</option>
            <option>ğŸ‰ Giáº£i trÃ­</option>
            <option>ğŸ‘— Quáº§n Ã¡o</option>
            <option>ğŸ’¼ Thu nháº­p</option>
            <option>ğŸ KhÃ¡c</option>
          </select>
        </div>
        <div>
          <label>NgÆ°á»i chi</label>
          <select id="t-person">
            <option>Äáº¡t</option>
            <option>TLinh</option>
            <option>Cáº£ hai</option>
          </select>
        </div>
      </div>
      <button class="btn btn-amber btn-full" onclick="addTransaction()">ğŸ’° ThÃªm Giao Dá»‹ch</button>
    </div>

    <div class="card">
      <div class="card-title">ğŸ“‹ Giao Dá»‹ch Gáº§n ÄÃ¢y</div>
      <div class="transaction-list" id="transaction-list">
        <div class="empty-state"><span>ğŸ’¸</span>ChÆ°a cÃ³ giao dá»‹ch nÃ o<br>ThÃªm giao dá»‹ch Ä‘áº§u tiÃªn nÃ o!</div>
      </div>
    </div>
  </div>

  <!-- CHORES TAB -->
  <div class="tab-content" id="tab-chores">
    <div class="card">
      <div class="card-title">ğŸ§¹ HÃ´m Nay ChÃºng MÃ¬nh LÃ m GÃ¬?</div>
      <div class="progress-wrap">
        <div class="progress-label">
          <span>Tiáº¿n Ä‘á»™</span>
          <span id="chore-progress-text">0/0 viá»‡c hoÃ n thÃ nh</span>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="chore-progress-fill" style="width:0%"></div></div>
      </div>
      <div class="chore-list" id="chore-list">
        <div class="empty-state"><span>âœ¨</span>NhÃ  sáº¡ch rá»“i hay chÆ°a thÃªm viá»‡c? ğŸ˜„</div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">â• ThÃªm Viá»‡c NhÃ </div>
      <div style="margin-bottom:0.6rem;">
        <label>TÃªn cÃ´ng viá»‡c</label>
        <input type="text" id="chore-name" placeholder="vd: Rá»­a bÃ¡t, quÃ©t nhÃ ...">
      </div>
      <div class="input-row">
        <div>
          <label>PhÃ¢n cÃ´ng cho</label>
          <select id="chore-assign">
            <option>Äáº¡t</option>
            <option>TLinh</option>
            <option>CÃ¹ng lÃ m ğŸ’•</option>
          </select>
        </div>
        <div>
          <label>Táº§n suáº¥t</label>
          <select id="chore-freq">
            <option>Háº±ng ngÃ y</option>
            <option>Háº±ng tuáº§n</option>
            <option>Háº±ng thÃ¡ng</option>
            <option>Khi cáº§n</option>
          </select>
        </div>
      </div>
      <button class="btn btn-sage btn-full" onclick="addChore()">ğŸ§¹ ThÃªm CÃ´ng Viá»‡c</button>
    </div>
  </div>

  <!-- NOTES TAB -->
  <div class="tab-content" id="tab-notes">
    <div class="card">
      <div class="card-title" style="margin-bottom:0.5rem">ğŸ“… Sá»± Kiá»‡n Sáº¯p Tá»›i</div>
      <div class="events-list" id="events-list">
        <div class="empty-state"><span>ğŸ—“ï¸</span>ChÆ°a cÃ³ sá»± kiá»‡n nÃ o</div>
      </div>
      <button class="btn btn-lavender btn-sm" onclick="showAddEvent()" style="margin-top:0.5rem">+ ThÃªm sá»± kiá»‡n</button>
    </div>

    <div class="card">
      <div class="card-title">ğŸ“ Ghi ChÃº Cá»§a ChÃºng MÃ¬nh</div>
      <div class="notes-grid" id="notes-grid">
        <div class="empty-state" style="grid-column:span 2"><span>ğŸ““</span>ChÆ°a cÃ³ ghi chÃº nÃ o</div>
      </div>
      <button class="btn btn-lavender btn-full" onclick="showAddNote()" style="margin-top:0.8rem">+ ThÃªm Ghi ChÃº</button>
    </div>
  </div>

  <!-- DREAMS TAB -->
  <div class="tab-content" id="tab-dreams">
    <div class="card" style="background: linear-gradient(135deg,#FFF8EE,#F8EEFF); border:2px solid var(--peach-light);">
      <div class="card-title">ğŸŒŸ Æ¯á»›c MÆ¡ Cá»§a ChÃºng MÃ¬nh</div>
      <p style="font-size:0.82rem;color:var(--text-soft);font-style:italic;margin-bottom:1rem;">"Hai ngÆ°á»i cÃ¹ng mÆ¡, Æ°á»›c mÆ¡ sáº½ thÃ nh hiá»‡n thá»±c ğŸ’«"</p>
      <div id="dream-list">
        <div class="empty-state"><span>ğŸŒˆ</span>CÃ¹ng nhau viáº¿t ra nhá»¯ng Æ°á»›c mÆ¡ nhÃ©!</div>
      </div>
    </div>
    <button class="btn btn-peach btn-full" onclick="showAddDream()" style="margin-top:0.5rem">âœ¨ ThÃªm Æ¯á»›c MÆ¡ Má»›i</button>
  </div>

  <!-- AI ASSISTANT TAB -->
  <div class="tab-content" id="tab-ai">
    <div class="ai-header">
      <h3>ğŸ¤– Trá»£ LÃ½ Tá»• áº¤m</h3>
      <p>Nháº¯n tin tá»± nhiÃªn â€” tá»› sáº½ tá»± ghi vÃ o Ä‘Ãºng chá»— cho cáº­u!<br>
      Nháº­p chi tiÃªu, nháº¯c viá»‡c nhÃ , cáº­p nháº­t Æ°á»›c mÆ¡, ghi chÃº nhanh ğŸŒ¸</p>
    </div>

    <div class="ai-suggestions">
      <button class="ai-suggest-btn" onclick="fillSuggest('HÃ´m nay Ä‘i chá»£ 120k vÃ  mua cÃ¡t mÃ¨o 80k')">ğŸ›’ Äi chá»£ + mÃ¨o</button>
      <button class="ai-suggest-btn" onclick="fillSuggest('ÄÃ£ dá»n khay vá»‡ sinh mÃ¨o vÃ  quÃ©t nhÃ  xong rá»“i')">âœ… Xong viá»‡c nhÃ </button>
      <button class="ai-suggest-btn" onclick="fillSuggest('Tiáº¿t kiá»‡m Ä‘Ã¡m cÆ°á»›i Ä‘Ã£ Ä‘Æ°á»£c 5 triá»‡u rá»“i, cáº­p nháº­t tiáº¿n Ä‘á»™ nhÃ©')">ğŸ’ Cáº­p nháº­t Æ°á»›c mÆ¡</button>
      <button class="ai-suggest-btn" onclick="fillSuggest('Nháº¯c mÃ¬nh mua thá»©c Äƒn mÃ¨o loáº¡i Whiskas vá»‹ cÃ¡ ngá»«')">ğŸ“ Ghi chÃº nhanh</button>
      <button class="ai-suggest-btn" onclick="fillSuggest('LÆ°Æ¡ng thÃ¡ng nÃ y 8 triá»‡u vá»«a vá»')">ğŸ’° Ghi thu nháº­p</button>
    </div>

    <div class="ai-chat-box">
      <div class="ai-messages" id="ai-messages">
        <div class="msg ai">
          <div class="msg-avatar">ğŸ¤–</div>
          <div class="msg-bubble">
            ChÃ o cáº­u! Tá»› lÃ  trá»£ lÃ½ cá»§a Tá»• áº¤m ğŸ¡<br><br>
            Cáº­u chá»‰ cáº§n nháº¯n tá»± nhiÃªn nhÆ° nháº¯n tin thÃ´i, tá»› sáº½ tá»± hiá»ƒu vÃ  ghi vÃ o Ä‘Ãºng chá»— nhÃ©! VÃ­ dá»¥:<br><br>
            ğŸ’° <i>"HÃ´m nay Äƒn sÃ¡ng 45k, Ä‘á»• xÄƒng 80k"</i><br>
            ğŸ± <i>"ÄÃ£ cho mÃ¨o Äƒn vÃ  dá»n khay xong"</i><br>
            ğŸŒŸ <i>"Tiáº¿t kiá»‡m cÆ°á»›i Ä‘Æ°á»£c 3 triá»‡u rá»“i"</i><br>
            ğŸ“ <i>"Nháº¯c mua Ä‘á»“ Äƒn mÃ¨o cuá»‘i tuáº§n"</i>
          </div>
        </div>
      </div>
      <div class="ai-input-row">
        <button class="ai-mic-btn" id="mic-btn" onclick="toggleMic()" title="NÃ³i chuyá»‡n">ğŸ¤</button>
        <textarea id="ai-input" placeholder="Nháº¯n gÃ¬ Ä‘Ã³... vd: hÃ´m nay Äƒn sÃ¡ng 45k" rows="1"
          onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendAI();}"
          oninput="this.style.height='auto';this.style.height=Math.min(this.scrollHeight,100)+'px'"></textarea>
        <button class="ai-send-btn" id="ai-send-btn" onclick="sendAI()" title="Gá»­i">â¤</button>
      </div>
    </div>

    <div class="card" style="background:linear-gradient(135deg,#F8FBFF,#FAFCFF); border-color:#D8E4F8;">
      <div class="card-title" style="font-size:0.9rem;">ğŸ’¡ Máº¹o nháº¯n tin</div>
      <div style="font-size:0.78rem; color:var(--text-soft); line-height:1.8;">
        ğŸ›’ <b>Chi tiÃªu:</b> "mua rau 30k, thá»‹t 80k"<br>
        ğŸ’° <b>Thu nháº­p:</b> "lÆ°Æ¡ng thÃ¡ng 8 vá» 8 triá»‡u"<br>
        âœ… <b>Viá»‡c nhÃ :</b> "xong rá»­a bÃ¡t vÃ  lau nhÃ  rá»“i"<br>
        ğŸŒŸ <b>Æ¯á»›c mÆ¡:</b> "tiáº¿t kiá»‡m cÆ°á»›i thÃªm 2 triá»‡u"<br>
        ğŸ“ <b>Ghi chÃº:</b> "nhá»› mua thuá»‘c táº©y giun mÃ¨o"<br>
        ğŸ± <b>MÃ¨o:</b> "cho cáº£ 5 bÃ© Äƒn xong rá»“i"
      </div>
    </div>
  </div>

</main>

<!-- MODAL: Add Note -->
<div class="modal-overlay" id="modal-note" onclick="closeModal('modal-note')">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-title">ğŸ“ Ghi ChÃº Má»›i</div>
    <div style="margin-bottom:0.6rem;">
      <label>TiÃªu Ä‘á»</label>
      <input type="text" id="note-title" placeholder="TiÃªu Ä‘á» ghi chÃº...">
    </div>
    <div style="margin-bottom:0.6rem;">
      <label>Ná»™i dung</label>
      <textarea id="note-body" placeholder="Viáº¿t gÃ¬ Ä‘Ã³..."></textarea>
    </div>
    <div style="margin-bottom:0.8rem;">
      <label>NhÃ£n</label>
      <div class="chip-group" id="note-tag-chips">
        <span class="chip active" data-val="Ghi nhá»›" onclick="selectChip(this,'note-tag-chips')">ğŸ“Œ Ghi nhá»›</span>
        <span class="chip" data-val="CÃ¹ng nhau" onclick="selectChip(this,'note-tag-chips')">ğŸ’• CÃ¹ng nhau</span>
        <span class="chip" data-val="Mua sáº¯m" onclick="selectChip(this,'note-tag-chips')">ğŸ›’ Mua sáº¯m</span>
        <span class="chip" data-val="Ã tÆ°á»Ÿng" onclick="selectChip(this,'note-tag-chips')">ğŸ’¡ Ã tÆ°á»Ÿng</span>
      </div>
    </div>
    <button class="btn btn-lavender btn-full" onclick="addNote()">ğŸ’¾ LÆ°u Ghi ChÃº</button>
  </div>
</div>

<!-- MODAL: Add Event -->
<div class="modal-overlay" id="modal-event" onclick="closeModal('modal-event')">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-title">ğŸ“… Sá»± Kiá»‡n Má»›i</div>
    <div style="margin-bottom:0.6rem;">
      <label>TÃªn sá»± kiá»‡n</label>
      <input type="text" id="event-name" placeholder="vd: Ká»· niá»‡m 1 nÄƒm yÃªu...">
    </div>
    <div class="input-row">
      <div>
        <label>NgÃ y</label>
        <input type="date" id="event-date">
      </div>
      <div>
        <label>Loáº¡i</label>
        <div class="chip-group" id="event-type-chips" style="margin-top:0.4rem">
          <span class="chip lav active" data-val="chung" onclick="selectChip(this,'event-type-chips')">ğŸ’‘ Chung</span>
          <span class="chip active" data-val="ca-nhan" onclick="selectChip(this,'event-type-chips')">ğŸ‘¤ CÃ¡ nhÃ¢n</span>
        </div>
      </div>
    </div>
    <div style="margin-bottom:0.8rem;">
      <label>NgÆ°á»i liÃªn quan</label>
      <select id="event-who">
        <option>Cáº£ hai</option>
        <option>Äáº¡t</option>
        <option>TLinh</option>
      </select>
    </div>
    <button class="btn btn-lavender btn-full" onclick="addEvent()">ğŸ“… LÆ°u Sá»± Kiá»‡n</button>
  </div>
</div>

<!-- MODAL: Add Dream -->
<div class="modal-overlay" id="modal-dream" onclick="closeModal('modal-dream')">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-title">ğŸŒŸ Æ¯á»›c MÆ¡ Má»›i</div>
    <div style="margin-bottom:0.6rem;">
      <label>TÃªn Æ°á»›c mÆ¡</label>
      <input type="text" id="dream-title" placeholder="vd: Du lá»‹ch ÄÃ  Láº¡t cÃ¹ng nhau...">
    </div>
    <div style="margin-bottom:0.6rem;">
      <label>Ghi chÃº thÃªm</label>
      <textarea id="dream-note" placeholder="MÃ´ táº£ thÃªm vá» Æ°á»›c mÆ¡ nÃ y..." style="min-height:60px;"></textarea>
    </div>
    <div class="input-row">
      <div>
        <label>Danh má»¥c</label>
        <div class="chip-group" id="dream-cat-chips" style="margin-top:0.3rem;">
          <span class="chip active" data-val="travel" onclick="selectChip(this,'dream-cat-chips')">âœˆï¸ Du lá»‹ch</span>
          <span class="chip" data-val="home" onclick="selectChip(this,'dream-cat-chips')">ğŸ  Tá»• áº¥m</span>
          <span class="chip" data-val="life" onclick="selectChip(this,'dream-cat-chips')">ğŸ’‘ Cuá»™c sá»‘ng</span>
          <span class="chip amber" data-val="money" onclick="selectChip(this,'dream-cat-chips')">ğŸ’° TÃ i chÃ­nh</span>
        </div>
      </div>
    </div>
    <div style="margin-bottom:0.8rem;">
      <label>Tiáº¿n Ä‘á»™ (<span id="dream-prog-val">0</span>%)</label>
      <input type="range" id="dream-progress" min="0" max="100" value="0" oninput="document.getElementById('dream-prog-val').textContent=this.value" style="padding:0.3rem 0; background:transparent; border:none;">
    </div>
    <button class="btn btn-peach btn-full" onclick="addDream()">ğŸŒŸ ThÃªm Æ¯á»›c MÆ¡</button>
  </div>
</div>

<script>
// --- STATE ---
let state = {
  transactions: [],
  chores: [],
  notes: [],
  events: [],
  dreams: [],
  loveNotes: []
};

// Load from memory (session-only, no localStorage)
function fmt(n) {
  return n.toLocaleString('vi-VN') + 'Ä‘';
}

// --- NAV ---
function switchTab(name, btn) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-' + name).classList.add('active');
  btn.classList.add('active');
  updateHomeStats();
}
function switchTabById(name) {
  const btn = document.querySelector(`[data-tab="${name}"]`);
  switchTab(name, btn);
}

// --- DATE ---
function setDate() {
  const d = new Date();
  const days = ['Chá»§ Nháº­t','Thá»© Hai','Thá»© Ba','Thá»© TÆ°','Thá»© NÄƒm','Thá»© SÃ¡u','Thá»© Báº£y'];
  document.getElementById('headerDate').textContent =
    `${days[d.getDay()]}, ${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()}`;
}

// --- CHIP SELECTION ---
function selectChip(el, groupId) {
  document.querySelectorAll(`#${groupId} .chip`).forEach(c => c.classList.remove('active'));
  el.classList.add('active');
}
function getChipVal(groupId) {
  const active = document.querySelector(`#${groupId} .chip.active`);
  return active ? active.dataset.val : '';
}

// --- MODALS ---
function showAddNote() { document.getElementById('modal-note').classList.add('show'); }
function showAddEvent() { document.getElementById('modal-event').classList.add('show'); }
function showAddDream() { document.getElementById('modal-dream').classList.add('show'); }
function closeModal(id) { document.getElementById(id).classList.remove('show'); }

// --- FINANCE ---
function addTransaction() {
  const desc = document.getElementById('t-desc').value.trim();
  const amount = parseFloat(document.getElementById('t-amount').value);
  if (!desc || !amount || amount <= 0) { alert('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin!'); return; }
  const type = getChipVal('type-chips') || 'expense';
  state.transactions.unshift({
    id: Date.now(), desc, amount, type,
    cat: document.getElementById('t-cat').value,
    person: document.getElementById('t-person').value,
    date: new Date().toLocaleDateString('vi-VN')
  });
  document.getElementById('t-desc').value = '';
  document.getElementById('t-amount').value = '';
  renderTransactions();
  updateHomeStats();
}

function deleteTransaction(id) {
  state.transactions = state.transactions.filter(t => t.id !== id);
  renderTransactions();
  updateHomeStats();
}

function renderTransactions() {
  const list = document.getElementById('transaction-list');
  if (!state.transactions.length) {
    list.innerHTML = '<div class="empty-state"><span>ğŸ’¸</span>ChÆ°a cÃ³ giao dá»‹ch nÃ o<br>ThÃªm giao dá»‹ch Ä‘áº§u tiÃªn nÃ o!</div>';
    document.getElementById('balance-display').textContent = '0 Ä‘';
    document.getElementById('total-in').textContent = '0Ä‘';
    document.getElementById('total-out').textContent = '0Ä‘';
    return;
  }
  let income = 0, expense = 0;
  state.transactions.forEach(t => { if(t.type==='income') income+=t.amount; else expense+=t.amount; });
  document.getElementById('balance-display').textContent = fmt(income - expense);
  document.getElementById('total-in').textContent = fmt(income);
  document.getElementById('total-out').textContent = fmt(expense);
  list.innerHTML = state.transactions.map(t => `
    <div class="transaction-item ${t.type}">
      <div class="t-info">
        <div class="t-desc">${t.cat} ${t.desc}</div>
        <div class="t-meta">${t.person} Â· ${t.date}</div>
      </div>
      <div class="t-amount ${t.type}">${t.type==='income'?'+':'-'}${fmt(t.amount)}</div>
      <button class="t-delete" onclick="deleteTransaction(${t.id})">âœ•</button>
    </div>
  `).join('');
}

// --- CHORES ---
function addChore() {
  const name = document.getElementById('chore-name').value.trim();
  if (!name) { alert('Nháº­p tÃªn cÃ´ng viá»‡c nhÃ©!'); return; }
  state.chores.push({
    id: Date.now(), name, done: false,
    assign: document.getElementById('chore-assign').value,
    freq: document.getElementById('chore-freq').value
  });
  document.getElementById('chore-name').value = '';
  renderChores();
  updateHomeStats();
}

function toggleChore(id) {
  const c = state.chores.find(c => c.id === id);
  if (c) c.done = !c.done;
  renderChores();
  updateHomeStats();
}

function renderChores() {
  const list = document.getElementById('chore-list');
  if (!state.chores.length) {
    list.innerHTML = '<div class="empty-state"><span>âœ¨</span>NhÃ  sáº¡ch rá»“i hay chÆ°a thÃªm viá»‡c? ğŸ˜„</div>';
    document.getElementById('chore-progress-text').textContent = '0/0 viá»‡c';
    document.getElementById('chore-progress-fill').style.width = '0%';
    return;
  }
  const done = state.chores.filter(c => c.done).length;
  const pct = Math.round(done / state.chores.length * 100);
  document.getElementById('chore-progress-text').textContent = `${done}/${state.chores.length} viá»‡c hoÃ n thÃ nh`;
  document.getElementById('chore-progress-fill').style.width = pct + '%';
  list.innerHTML = state.chores.map(c => `
    <div class="chore-item ${c.done ? 'done' : ''}">
      <div class="chore-check" onclick="toggleChore(${c.id})">${c.done ? 'âœ“' : ''}</div>
      <div class="chore-info">
        <div class="chore-name">${c.name}</div>
        <div class="chore-assign">ğŸ‘¤ ${c.assign}</div>
      </div>
      <span class="chore-freq">${c.freq}</span>
    </div>
  `).join('');
}

// --- NOTES ---
const NOTE_COLORS = ['color-1','color-2','color-3','color-4','color-5'];
function addNote() {
  const title = document.getElementById('note-title').value.trim();
  const body = document.getElementById('note-body').value.trim();
  if (!title) { alert('Nháº­p tiÃªu Ä‘á» nhÃ©!'); return; }
  state.notes.unshift({
    id: Date.now(), title, body,
    tag: getChipVal('note-tag-chips') || 'Ghi nhá»›',
    color: NOTE_COLORS[state.notes.length % NOTE_COLORS.length],
    date: new Date().toLocaleDateString('vi-VN')
  });
  document.getElementById('note-title').value = '';
  document.getElementById('note-body').value = '';
  closeModal('modal-note');
  renderNotes();
}

function deleteNote(id) {
  state.notes = state.notes.filter(n => n.id !== id);
  renderNotes();
}

function renderNotes() {
  const grid = document.getElementById('notes-grid');
  if (!state.notes.length) {
    grid.innerHTML = '<div class="empty-state" style="grid-column:span 2"><span>ğŸ““</span>ChÆ°a cÃ³ ghi chÃº nÃ o</div>';
    return;
  }
  grid.innerHTML = state.notes.map(n => `
    <div class="note-card ${n.color}">
      <button class="note-del" onclick="deleteNote(${n.id})">âœ•</button>
      <div class="note-tag">${n.tag}</div>
      <div class="note-title">${n.title}</div>
      <div class="note-body">${n.body || ''}</div>
      <div class="note-date">${n.date}</div>
    </div>
  `).join('');
}

// --- EVENTS ---
function addEvent() {
  const name = document.getElementById('event-name').value.trim();
  const date = document.getElementById('event-date').value;
  if (!name || !date) { alert('Nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin nhÃ©!'); return; }
  const d = new Date(date);
  state.events.push({
    id: Date.now(), name,
    day: d.getDate(),
    month: d.toLocaleString('vi-VN', {month: 'short'}),
    type: getChipVal('event-type-chips') || 'chung',
    who: document.getElementById('event-who').value,
    dateVal: date
  });
  state.events.sort((a,b) => a.dateVal.localeCompare(b.dateVal));
  document.getElementById('event-name').value = '';
  document.getElementById('event-date').value = '';
  closeModal('modal-event');
  renderEvents();
}

function renderEvents() {
  const list = document.getElementById('events-list');
  if (!state.events.length) {
    list.innerHTML = '<div class="empty-state"><span>ğŸ—“ï¸</span>ChÆ°a cÃ³ sá»± kiá»‡n nÃ o</div>';
    return;
  }
  list.innerHTML = state.events.map(e => `
    <div class="event-item">
      <div class="event-date-box">
        <div class="event-day">${e.day}</div>
        <div class="event-month">${e.month}</div>
      </div>
      <div class="event-info">
        <div class="event-name">${e.name}</div>
        <div class="event-who">ğŸ‘¤ ${e.who}</div>
      </div>
      <span class="event-shared ${e.type}">${e.type === 'chung' ? 'ğŸ’‘ Chung' : 'ğŸ‘¤ CÃ¡ nhÃ¢n'}</span>
    </div>
  `).join('');
}

// --- DREAMS ---
const CAT_MAP = { travel: {label:'âœˆï¸ Du lá»‹ch', cls:'cat-travel'}, home: {label:'ğŸ  Tá»• áº¥m', cls:'cat-home'}, life: {label:'ğŸ’‘ Cuá»™c sá»‘ng', cls:'cat-life'}, money: {label:'ğŸ’° TÃ i chÃ­nh', cls:'cat-money'} };
function addDream() {
  const title = document.getElementById('dream-title').value.trim();
  if (!title) { alert('Nháº­p tÃªn Æ°á»›c mÆ¡ nhÃ©!'); return; }
  state.dreams.push({
    id: Date.now(), title,
    note: document.getElementById('dream-note').value.trim(),
    cat: getChipVal('dream-cat-chips') || 'travel',
    progress: parseInt(document.getElementById('dream-progress').value),
    done: false
  });
  document.getElementById('dream-title').value = '';
  document.getElementById('dream-note').value = '';
  document.getElementById('dream-progress').value = 0;
  document.getElementById('dream-prog-val').textContent = '0';
  closeModal('modal-dream');
  renderDreams();
  updateHomeStats();
}

function toggleDream(id) {
  const d = state.dreams.find(d => d.id === id);
  if (d) { d.done = !d.done; if(d.done) d.progress = 100; }
  renderDreams();
  updateHomeStats();
}

function renderDreams() {
  const list = document.getElementById('dream-list');
  if (!state.dreams.length) {
    list.innerHTML = '<div class="empty-state"><span>ğŸŒˆ</span>CÃ¹ng nhau viáº¿t ra nhá»¯ng Æ°á»›c mÆ¡ nhÃ©!</div>';
    return;
  }
  list.innerHTML = state.dreams.map(d => {
    const cat = CAT_MAP[d.cat] || CAT_MAP.travel;
    return `
    <div class="dream-item ${d.done ? 'done' : ''}">
      <div class="dream-header">
        <div class="dream-title">${d.title}</div>
        <span class="dream-cat ${cat.cls}">${cat.label}</span>
      </div>
      ${d.note ? `<div class="dream-note">${d.note}</div>` : ''}
      <div class="dream-progress-label">
        <span>Tiáº¿n Ä‘á»™</span><span>${d.progress}%</span>
      </div>
      <div class="dream-progress-bar">
        <div class="dream-progress-fill" style="width:${d.progress}%"></div>
      </div>
      <div class="dream-footer">
        <button class="dream-done-btn" onclick="toggleDream(${d.id})">
          ${d.done ? 'âœ“ ÄÃ£ hoÃ n thÃ nh!' : 'ğŸ¯ ÄÃ¡nh dáº¥u hoÃ n thÃ nh'}
        </button>
      </div>
    </div>
  `}).join('');
}

// --- LOVE NOTES ---
function saveLoveNote() {
  const txt = document.getElementById('love-note').value.trim();
  if (!txt) return;
  state.loveNotes.unshift({ text: txt, time: new Date().toLocaleTimeString('vi-VN', {hour:'2-digit',minute:'2-digit'}) });
  document.getElementById('love-note').value = '';
  renderLoveNotes();
}
function renderLoveNotes() {
  const list = document.getElementById('love-notes-list');
  if (!state.loveNotes.length) { list.innerHTML = ''; return; }
  list.innerHTML = state.loveNotes.slice(0,3).map(n => `
    <div style="background:var(--peach-light);border-radius:12px;padding:0.7rem 0.9rem;margin-top:0.5rem;font-size:0.82rem;color:var(--text);border-left:3px solid var(--rose);">
      <span style="font-style:italic;">"${n.text}"</span>
      <span style="float:right;font-size:0.7rem;color:var(--text-soft);">${n.time}</span>
    </div>
  `).join('');
}

// --- HOME STATS ---
function updateHomeStats() {
  // Balance
  let inc = 0, exp = 0;
  state.transactions.forEach(t => { if(t.type==='income') inc+=t.amount; else exp+=t.amount; });
  document.getElementById('home-balance').textContent = fmt(inc - exp);
  // Chores
  const done = state.chores.filter(c => c.done).length;
  document.getElementById('home-chores').textContent = `${done}/${state.chores.length}`;
  // Dreams
  if (state.dreams.length) {
    const avg = Math.round(state.dreams.reduce((s,d)=>s+d.progress,0) / state.dreams.length);
    document.getElementById('home-dreams').textContent = avg + '%';
  } else {
    document.getElementById('home-dreams').textContent = '0%';
  }
}

// --- AI ASSISTANT ---
let aiChatHistory = [];
let isRecording = false;
let recognition = null;

function fillSuggest(text) {
  document.getElementById('ai-input').value = text;
  document.getElementById('ai-input').focus();
}

function appendMsg(role, content, actionTag) {
  const box = document.getElementById('ai-messages');
  const div = document.createElement('div');
  div.className = `msg ${role}`;
  const avatar = role === 'ai' ? 'ğŸ¤–' : 'ğŸ¡';
  let tagHtml = '';
  if (actionTag) {
    const cls = actionTag.type || '';
    tagHtml = `<div><span class="msg-action-tag ${cls}">${actionTag.label}</span></div>`;
  }
  div.innerHTML = `
    <div class="msg-avatar">${avatar}</div>
    <div class="msg-bubble">${content}${tagHtml}</div>
  `;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
  return div;
}

function appendTyping() {
  const box = document.getElementById('ai-messages');
  const div = document.createElement('div');
  div.className = 'msg ai';
  div.id = 'typing-indicator';
  div.innerHTML = `
    <div class="msg-avatar">ğŸ¤–</div>
    <div class="msg-bubble"><div class="typing-dots"><span></span><span></span><span></span></div></div>
  `;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

function removeTyping() {
  const el = document.getElementById('typing-indicator');
  if (el) el.remove();
}

async function sendAI() {
  const input = document.getElementById('ai-input');
  const text = input.value.trim();
  if (!text) return;

  const btn = document.getElementById('ai-send-btn');
  btn.disabled = true;
  input.value = '';
  input.style.height = 'auto';

  appendMsg('user', text);
  aiChatHistory.push({ role: 'user', content: text });
  appendTyping();

  // Build context for Claude
  const ctx = {
    transactions: state.transactions.slice(0,10).map(t => ({desc:t.desc, amount:t.amount, type:t.type, cat:t.cat})),
    chores: state.chores.map(c => ({name:c.name, done:c.done, assign:c.assign})),
    dreams: state.dreams.map(d => ({title:d.title, progress:d.progress, done:d.done})),
    notes: state.notes.slice(0,5).map(n => ({title:n.title}))
  };

  const systemPrompt = `Báº¡n lÃ  trá»£ lÃ½ thÃ´ng minh cá»§a á»©ng dá»¥ng quáº£n lÃ½ gia Ä‘Ã¬nh "Tá»• áº¤m". Gia Ä‘Ã¬nh gá»“m 2 ngÆ°á»i (má»™t cáº·p Ä‘Ã´i) vÃ  5 con mÃ¨o. Má»¥c tiÃªu: tiáº¿t kiá»‡m Ä‘á»ƒ káº¿t hÃ´n, xÃ¢y nhÃ , má»Ÿ tiá»‡m hoa.

Dá»¯ liá»‡u hiá»‡n táº¡i cá»§a á»©ng dá»¥ng:
${JSON.stringify(ctx, null, 2)}

Nhiá»‡m vá»¥ cá»§a báº¡n: PhÃ¢n tÃ­ch tin nháº¯n cá»§a ngÆ°á»i dÃ¹ng báº±ng tiáº¿ng Viá»‡t tá»± nhiÃªn vÃ  tráº£ vá» JSON NGHIÃŠM NGáº¶T theo format sau (khÃ´ng cÃ³ text nÃ o ngoÃ i JSON):

{
  "reply": "CÃ¢u tráº£ lá»i thÃ¢n thiá»‡n, ngáº¯n gá»n báº±ng tiáº¿ng Viá»‡t (cÃ³ emoji)",
  "actions": [
    {
      "type": "ADD_TRANSACTION",
      "data": { "desc": "mÃ´ táº£", "amount": 50000, "transType": "expense|income", "cat": "ğŸ›’ Thá»±c pháº©m|ğŸ  NhÃ  cá»­a|ğŸš— Di chuyá»ƒn|ğŸ’Š Sá»©c khá»e|ğŸ‰ Giáº£i trÃ­|ğŸ‘— Quáº§n Ã¡o|ğŸ’¼ Thu nháº­p|ğŸ± ThÃº cÆ°ng|ğŸ KhÃ¡c", "person": "Äáº¡t|TLinh|Cáº£ hai" }
    },
    {
      "type": "COMPLETE_CHORE",
      "data": { "name": "tÃªn viá»‡c khá»›p gáº§n Ä‘Ãºng" }
    },
    {
      "type": "UPDATE_DREAM_PROGRESS",
      "data": { "title": "tÃªn Æ°á»›c mÆ¡ khá»›p gáº§n Ä‘Ãºng", "progress": 50 }
    },
    {
      "type": "ADD_NOTE",
      "data": { "title": "tiÃªu Ä‘á» ngáº¯n", "body": "ná»™i dung", "tag": "Ghi nhá»›|CÃ¹ng nhau|Mua sáº¯m|Ã tÆ°á»Ÿng" }
    }
  ]
}

Quy táº¯c:
- actions cÃ³ thá»ƒ lÃ  máº£ng rá»—ng [] náº¿u khÃ´ng cáº§n thao tÃ¡c
- CÃ³ thá»ƒ cÃ³ nhiá»u actions cÃ¹ng lÃºc (vd nhiá»u giao dá»‹ch)
- Sá»‘ tiá»n luÃ´n lÃ  sá»‘ nguyÃªn (Ä‘á»“ng VND), tá»± quy Ä‘á»•i "k" = *1000, "triá»‡u" = *1000000
- Náº¿u ngÆ°á»i dÃ¹ng nÃ³i "Ä‘i chá»£ 120k" â†’ ADD_TRANSACTION vá»›i cat "ğŸ›’ Thá»±c pháº©m"
- Náº¿u nÃ³i "cÃ¡t mÃ¨o", "thá»©c Äƒn mÃ¨o", "khay mÃ¨o" â†’ cat "ğŸ± ThÃº cÆ°ng"
- Náº¿u nÃ³i Ä‘Ã£ "xong", "lÃ m rá»“i", "dá»n rá»“i" má»™t viá»‡c â†’ COMPLETE_CHORE
- Náº¿u nÃ³i vá» tiáº¿t kiá»‡m / tiáº¿n Ä‘á»™ Æ°á»›c mÆ¡ â†’ UPDATE_DREAM_PROGRESS
- Náº¿u nÃ³i "nháº¯c", "nhá»›", "ghi láº¡i" â†’ ADD_NOTE
- Pháº£n há»“i thÃ¢n thiá»‡n, áº¥m Ã¡p, cÃ³ thá»ƒ thÃªm emoji mÃ¨o ğŸ± khi liÃªn quan Ä‘áº¿n mÃ¨o
- KHÃ”NG tráº£ vá» báº¥t cá»© thá»© gÃ¬ ngoÃ i JSON`;

  try {
    const response = await fetch('/api/ai', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        system: systemPrompt,
        messages: aiChatHistory
      })
    });

    const data = await response.json();
    removeTyping();

    const raw = data.content?.[0]?.text || '{}';
    let parsed;
    try {
      const clean = raw.replace(/```json|```/g, '').trim();
      parsed = JSON.parse(clean);
    } catch(e) {
      parsed = { reply: raw, actions: [] };
    }

    aiChatHistory.push({ role: 'assistant', content: raw });

    // Execute actions
    const actionLabels = [];
    if (parsed.actions && parsed.actions.length > 0) {
      for (const action of parsed.actions) {
        if (action.type === 'ADD_TRANSACTION' && action.data) {
          const d = action.data;
          state.transactions.unshift({
            id: Date.now() + Math.random(),
            desc: d.desc || 'Chi tiÃªu',
            amount: d.amount || 0,
            type: d.transType || 'expense',
            cat: d.cat || 'ğŸ KhÃ¡c',
            person: d.person || 'Cáº£ hai',
            date: new Date().toLocaleDateString('vi-VN')
          });
          renderTransactions();
          updateHomeStats();
          const label = d.transType === 'income' ? 'ğŸ’° ÄÃ£ ghi thu nháº­p' : 'ğŸ’¸ ÄÃ£ ghi chi tiÃªu';
          actionLabels.push({ label, type: 'finance' });
        }
        if (action.type === 'COMPLETE_CHORE' && action.data) {
          const keyword = (action.data.name || '').toLowerCase();
          const chore = state.chores.find(c => c.name.toLowerCase().includes(keyword) || keyword.includes(c.name.toLowerCase().split(' ')[0]));
          if (chore) { chore.done = true; renderChores(); updateHomeStats(); }
          actionLabels.push({ label: 'âœ… ÄÃ£ Ä‘Ã¡nh dáº¥u xong', type: '' });
        }
        if (action.type === 'UPDATE_DREAM_PROGRESS' && action.data) {
          const keyword = (action.data.title || '').toLowerCase();
          const dream = state.dreams.find(d => d.title.toLowerCase().includes(keyword) || keyword.includes(d.title.toLowerCase().split(' ')[0]));
          if (dream) {
            dream.progress = Math.min(100, action.data.progress || dream.progress);
            if (dream.progress >= 100) dream.done = true;
            renderDreams(); updateHomeStats();
          }
          actionLabels.push({ label: 'ğŸŒŸ ÄÃ£ cáº­p nháº­t Æ°á»›c mÆ¡', type: 'dream' });
        }
        if (action.type === 'ADD_NOTE' && action.data) {
          const colors = ['color-1','color-2','color-3','color-4','color-5'];
          state.notes.unshift({
            id: Date.now() + Math.random(),
            title: action.data.title || 'Ghi chÃº',
            body: action.data.body || '',
            tag: action.data.tag || 'Ghi nhá»›',
            color: colors[state.notes.length % colors.length],
            date: new Date().toLocaleDateString('vi-VN')
          });
          renderNotes();
          actionLabels.push({ label: 'ğŸ“ ÄÃ£ lÆ°u ghi chÃº', type: 'note' });
        }
      }
    }

    const mainTag = actionLabels.length > 0 ? actionLabels[0] : null;
    appendMsg('ai', parsed.reply || 'Tá»› Ä‘Ã£ xá»­ lÃ½ rá»“i nhÃ©! ğŸŒ¸', mainTag);

  } catch (err) {
    removeTyping();
    appendMsg('ai', 'Ã”i, cÃ³ lá»—i káº¿t ná»‘i rá»“i! Cáº­u thá»­ láº¡i nhÃ© ğŸ˜…');
    console.error(err);
  }

  btn.disabled = false;
  input.focus();
}

// --- VOICE INPUT ---
function toggleMic() {
  const btn = document.getElementById('mic-btn');
  if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
    alert('TrÃ¬nh duyá»‡t cá»§a cáº­u chÆ°a há»— trá»£ giá»ng nÃ³i. Thá»­ dÃ¹ng Chrome nhÃ©!');
    return;
  }
  if (isRecording) {
    recognition && recognition.stop();
    return;
  }
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SR();
  recognition.lang = 'vi-VN';
  recognition.interimResults = false;
  recognition.onstart = () => { isRecording = true; btn.classList.add('recording'); btn.textContent = 'â¹'; };
  recognition.onresult = (e) => {
    const transcript = e.results[0][0].transcript;
    document.getElementById('ai-input').value = transcript;
  };
  recognition.onend = () => { isRecording = false; btn.classList.remove('recording'); btn.textContent = 'ğŸ¤'; };
  recognition.onerror = () => { isRecording = false; btn.classList.remove('recording'); btn.textContent = 'ğŸ¤'; };
  recognition.start();
}
const defaultChores = [
  // ğŸ± ChÄƒm mÃ¨o
  { name: 'Cho mÃ¨o Äƒn sÃ¡ng', assign: 'Cáº£ hai', freq: 'Háº±ng ngÃ y' },
  { name: 'Cho mÃ¨o Äƒn tá»‘i', assign: 'Cáº£ hai', freq: 'Háº±ng ngÃ y' },
  { name: 'Thay nÆ°á»›c uá»‘ng cho mÃ¨o', assign: 'Cáº£ hai', freq: 'Háº±ng ngÃ y' },
  { name: 'Dá»n khay vá»‡ sinh mÃ¨o', assign: 'Cáº£ hai', freq: 'Háº±ng ngÃ y' },
  { name: 'Vá»‡ sinh khay vá»‡ sinh sÃ¢u', assign: 'Cáº£ hai', freq: 'Háº±ng tuáº§n' },
  { name: 'Cháº£i lÃ´ng cho bÃ© mÃ¨o', assign: 'Äáº¡t', freq: 'Háº±ng tuáº§n' },
  { name: 'Kiá»ƒm tra sá»©c khá»e mÃ¨o', assign: 'Cáº£ hai', freq: 'Háº±ng tuáº§n' },
  { name: 'Giáº·t Ä‘á»‡m / chá»— ngá»§ mÃ¨o', assign: 'TLinh', freq: 'Háº±ng thÃ¡ng' },
  { name: 'Äáº·t lá»‹ch tiÃªm phÃ²ng / táº©y giun', assign: 'Cáº£ hai', freq: 'Háº±ng thÃ¡ng' },
  // ğŸ  NhÃ  cá»­a
  { name: 'QuÃ©t nhÃ  / hÃºt lÃ´ng mÃ¨o', assign: 'Cáº£ hai', freq: 'Háº±ng ngÃ y' },
  { name: 'Lau nhÃ ', assign: 'TLinh', freq: 'Háº±ng tuáº§n' },
  { name: 'Rá»­a bÃ¡t', assign: 'Äáº¡t', freq: 'Háº±ng ngÃ y' },
  { name: 'Äá»• rÃ¡c', assign: 'Äáº¡t', freq: 'Háº±ng ngÃ y' },
  { name: 'Giáº·t Ä‘á»“', assign: 'TLinh', freq: 'Háº±ng tuáº§n' },
  { name: 'PhÆ¡i / gáº¥p Ä‘á»“', assign: 'Cáº£ hai', freq: 'Háº±ng tuáº§n' },
  { name: 'Dá»n phÃ²ng ngá»§', assign: 'Cáº£ hai', freq: 'Háº±ng tuáº§n' },
  { name: 'Lau báº¿p & dá»n bá»“n rá»­a', assign: 'TLinh', freq: 'Háº±ng tuáº§n' },
  { name: 'Äi chá»£ / mua thá»±c pháº©m', assign: 'Cáº£ hai', freq: 'Háº±ng tuáº§n' },
  { name: 'Vá»‡ sinh nhÃ  táº¯m', assign: 'Äáº¡t', freq: 'Háº±ng tuáº§n' },
  { name: 'Lau cá»­a sá»• & quáº¡t', assign: 'Cáº£ hai', freq: 'Háº±ng thÃ¡ng' },
];

defaultChores.forEach(c => {
  state.chores.push({ id: Date.now() + Math.random(), name: c.name, done: false, assign: c.assign, freq: c.freq });
});
renderChores();

// --- INIT ---
setDate();
updateHomeStats();
</script>
</body>
</html>
